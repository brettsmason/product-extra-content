(()=>{"use strict";const e=window.wp.plugins,t=window.wp.editor,n=window.wp.data,r=window.wp.coreData,o=window.wp.components,a=window.wp.compose,i=window.wp.element,s=window.wp.htmlEntities,c=window.wp.i18n,d=window.ReactJSXRuntime,l=({kind:e,name:t,value:l,onChange:p,label:u,placeholder:w,postStatus:g="publish"})=>{const[m,y]=(0,i.useState)(""),[_,h]=(0,i.useState)(""),x=(0,a.useDebounce)(e=>h(e),300);(0,i.useEffect)(()=>{x(m)},[m,x]);const S=(0,n.useSelect)(n=>{if(!Array.isArray(l)||0===l.length)return[];const o={include:l,per_page:l.length||1};return"postType"===e&&(o.status=g),n(r.store).getEntityRecords(e,t,o)||[]},[l,e,t,g]),b=(0,n.useSelect)(n=>{if(!_)return[];const o={search:_,per_page:20};return"postType"===e&&(o.status=g),n(r.store).getEntityRecords(e,t,o)||[]},[_,e,t,g]),f=t=>{var n;return"taxonomy"===e?(0,s.decodeEntities)(null!==(n=t?.name)&&void 0!==n?n:""):(0,s.decodeEntities)((t?.title?.rendered||t?.title||"").toString())},A=Array.isArray(S)?S.map(e=>({id:e.id,label:f(e)})):[],C=Array.isArray(b)?b.map(e=>({id:e.id,label:f(e)})):[],E=Array.isArray(l)?l.map(e=>A.find(t=>t.id===e)?.label).filter(Boolean):[];return(0,d.jsx)(o.FormTokenField,{label:u,value:E,suggestions:(_?C:[]).map(e=>e.label),onInputChange:e=>y(e),onChange:e=>{const t=[...A,...C],n=e.map(e=>t.find(t=>t.label===e)?.id).filter(e=>Number.isInteger(e));p(n)},placeholder:w||(0,c.sprintf)(/* translators: %s: The item type being searched (e.g., product or category) */ /* translators: %s: The item type being searched (e.g., product or category) */
(0,c.__)("Search %s…","product-extra-content"),t)})};(0,e.registerPlugin)("product-extra-content-panel",{render:()=>{const e=(0,n.useSelect)(e=>e("core/editor").getCurrentPostType(),[]),[o,a]=(0,r.useEntityProp)("postType",e,"meta");return(0,d.jsxs)(t.PluginDocumentSettingPanel,{name:"product-extra-content",title:(0,c.__)("Settings","product-extra-content"),className:"product-extra-content",children:[(0,d.jsx)(l,{kind:"postType",name:"product",label:(0,c.__)("Products","product-extra-content"),value:o?.product_ids||[],onChange:e=>a({...o||{},product_ids:e}),placeholder:(0,c.__)("Search for products…","product-extra-content")}),(0,d.jsx)(l,{kind:"taxonomy",name:"product_cat",label:(0,c.__)("Categories","product-extra-content"),value:o?.category_ids||[],onChange:e=>a({...o||{},category_ids:e}),placeholder:(0,c.__)("Search for categories…","product-extra-content")})]})}})})();